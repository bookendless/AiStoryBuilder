/**
 * 草案執筆関連プロンプトテンプレート
 */

export const DRAFT_PROMPTS = {
    generateSingle: `以下の設定に基づいて物語の草案を執筆してください。

【章情報】
章タイトル: {chapterTitle}
章の概要: {chapterSummary}
登場キャラクター: {characters}
設定・場所: {setting}
雰囲気・ムード: {mood}
重要な出来事: {keyEvents}

【プロジェクト情報】
作品タイトル: {projectTitle}
メインジャンル: {mainGenre}
サブジャンル: {subGenre}
ターゲット読者: {targetReader}

【前章までのあらすじ】
{previousStory}

【直前の章の末尾（一貫性確保用）】
{previousChapterEnd}

【プロジェクト全体のキャラクター情報（一貫性確保用）】
{projectCharacters}

【プロット情報（一貫性確保用）】
テーマ: {plotTheme}
舞台設定: {plotSetting}
物語の構造: {plotStructure}

【文体設定】
文体: {style}

{styleDetails}

【執筆指示】
1. **文字数**: 3000-4000文字程度で執筆してください
2. **会話重視**: キャラクター同士の会話を豊富に含め、生き生きとした対話を心がけてください
3. **臨場感**: 読者がその場にいるような感覚を与える詳細な情景描写を入れてください
4. **章の目的**: 章の概要に沿った内容で、物語を前進させてください
5. **設定の整合性**: 「設定資料・世界観」や「重要用語集」の内容と矛盾しないようにしてください
6. **関係性の反映**: 「キャラクター相関図」の関係性に基づいた会話や態度を描写してください
{styleDetails ? '7. **文体の統一**: 上記の文体設定を厳密に守り、一貫性のある文章を執筆してください' : ''}

【文体の特徴（基本）】
- 現代的な日本語小説の文体
- 適度な改行と段落分け（会話の前後、場面転換時など）
- 会話は「」で囲む
- 情景描写は詩的で美しい表現を
- 改行は自然な文章の流れに従って適切に行う

【改行の指示】
- 会話の前後で改行する
- 場面転換時に改行する
- 段落の区切りで改行する
- 長い文章は読みやすく適度に改行する
- 改行は通常の改行文字（\\n）で表現する

{customPrompt}

章の内容を執筆してください。`,

    generateFull: `以下のプロジェクト全体の情報を基に、一貫性のある魅力的な小説の全章を執筆してください。

【プロジェクト基本情報】
作品タイトル: {title}
メインジャンル: {mainGenre}
サブジャンル: {subGenre}
ターゲット読者: {targetReader}
プロジェクトテーマ: {projectTheme}

【プロット基本設定】
テーマ: {plotTheme}
舞台設定: {plotSetting}
フック: {plotHook}
主人公の目標: {protagonistGoal}
主要な障害: {mainObstacle}

【物語構造の詳細】
{structureDetails}

【キャラクター情報】
{charactersInfo}

【章立て構成】
{chaptersInfo}

【執筆指示】
1. **全章の一貫性**: キャラクターの性格、設定、物語の流れを全章を通して一貫させてください
2. **文字数**: 各章3000-4000文字程度で執筆してください
3. **会話重視**: キャラクター同士の会話を豊富に含め、自然で生き生きとした対話を心がけてください
4. **臨場感**: 読者がその場にいるような感覚を与える詳細な情景描写を入れてください
5. **感情表現**: キャラクターの心理状態や感情を丁寧に描写してください
6. **五感の活用**: 視覚、聴覚、触覚、嗅覚、味覚を意識した描写を入れてください
7. **章の目的**: 各章の概要に沿った内容で、物語を前進させてください
8. **文体の統一**: 現代的な日本語小説の文体で、読み手が感情移入しやすい表現を使用してください

【出力形式】
以下の形式で各章の草案を出力してください：

=== 第1章: [章タイトル] ===
[章の草案内容]

=== 第2章: [章タイトル] ===
[章の草案内容]

[以下、全章分続く]

各章の草案を執筆してください。`,

    enhanceDescription: `以下の文章の描写をより詳細で魅力的に強化してください。

【現在の文章】
{currentText}

【強化指示】
- 情景描写をより詳細に
- キャラクターの感情表現を豊かに
- 五感を使った表現を追加
- 会話の自然さを保ちつつ、心理描写を強化
- 文章の長さは元の1.2-1.5倍程度に
- 適度な改行と段落分けを行ってください
- 改行は通常の改行文字（\\n）で表現してください

強化された文章：`,

    adjustStyle: `以下の文章の文体を調整し、より読みやすく魅力的にしてください。

【現在の文章】
{currentText}

【調整指示】
- 文章のリズムを整える
- 冗長な表現を簡潔に
- 読みやすい改行と段落分け
- 自然で現代的な日本語に
- 内容は変えずに表現のみ改善
- 改行は通常の改行文字（\\n）で表現してください

調整された文章：`,

    shorten: `以下の文章を簡潔にまとめ、冗長な部分を削除してください。

【現在の文章】
{currentText}

【短縮指示】
- 重要な内容は保持
- 冗長な表現を削除
- 文章の流れを保つ
- 約70-80%の長さに短縮
- 読みやすさを維持
- 適度な改行と段落分けを行ってください
- 改行は通常の改行文字（\\n）で表現してください

短縮された文章：`,

    improve: `以下の章の草案を総合的に改善してください。

【章情報】
章タイトル: {chapterTitle}
章の概要: {chapterSummary}

【現在の草案】
{currentText}

【改善指示】
1. **描写の強化**
   - 情景描写をより詳細で魅力的に
   - キャラクターの感情表現を豊かに
   - 五感を使った表現を追加
   - 会話の自然さを保ちつつ、心理描写を強化

2. **文体の調整**
   - 文章のリズムを整える
   - 冗長な表現を簡潔に
   - 読みやすい改行と段落分け
   - 自然で現代的な日本語に

3. **文字数と内容**
   - 現在の文字数（{currentLength}文字）を維持または3,000-4,000文字程度に調整
   - 重要な内容は保持しつつ、表現を改善
   - 章の目的に沿った内容を維持

4. **改行の指示**
   - 適度な改行と段落分けを行ってください
   - 改行は通常の改行文字（\\n）で表現してください

改善された草案：`,

    critique: `あなたは辛口で知られるプロの文芸編集者です。以下の文章を、構成、キャラクターの一貫性、描写、文体、感情表現の各側面で客観的に評価してください。

【章情報】
作品タイトル: {projectTitle}
章タイトル: {chapterTitle}
章の概要: {chapterSummary}

【評価対象の文章】
{currentText}

【評価基準（各項目10点満点で採点）】
1. **プロットの一貫性**：物語に矛盾や論理的な飛躍がないか？時系列や因果関係は明確か？
2. **キャラクターの深み**：登場人物は多面的で、行動に説得力があるか？性格の一貫性は保たれているか？
3. **描写の具体性**：五感に訴えかける具体的な描写がなされているか？情景が読者に伝わるか？
4. **読者共感度**：読者が感情移入できる感情的な真正性があるか？キャラクターの心情が伝わるか？
5. **文体の完成度**：文章のリズムは整い、読みやすいか？冗長な表現や不自然な日本語はないか？

【重要】以下のJSON形式で「必ず」出力してください。説明文やコメントは一切不要です。JSONのみを出力してください:

{{
  "scores": {{
    "plot": 0-10の整数,
    "character": 0-10の整数,
    "description": 0-10の整数,
    "empathy": 0-10の整数,
    "style": 0-10の整数
  }},
  "weaknesses": [
    {{
      "aspect": "評価項目名（例：プロットの一貫性）",
      "score": 0-10の整数,
      "problem": "具体的な問題点の説明（100文字程度）",
      "solutions": [
        "改善策1（具体的な修正案、50文字程度）",
        "改善策2（具体的な修正案、50文字程度）",
        "改善策3（具体的な修正案、50文字程度）"
      ]
    }}
  ],
  "summary": "全体的な評価と最も重要な改善点の要約（200文字程度）"
}}

【出力ルール】
- 7点以下の項目については、必ずweaknessesに含めてください
- JSON形式以外のテキストは一切出力しないでください
- コードブロック（三重のバッククォート）は使用しないでください
- JSONのみを出力してください`,

    revise: `フェーズ1で指摘された弱点を克服するために、以下の文章を書き直してください。

【章情報】
作品タイトル: {projectTitle}
章タイトル: {chapterTitle}
章の概要: {chapterSummary}

【元の文章】
{currentText}

【フェーズ1での評価結果】
{critiqueResult}

【改訂指示】
1. **弱点の克服**: フェーズ1で指摘されたすべての弱点を克服してください。特に7点以下の評価項目については、提示された改善策を必ず適用してください。
2. **文脈の保持**: 元の文章の物語の流れ、キャラクターの性格、設定の一貫性を必ず保持してください。
3. **描写の強化**: 五感を活用した具体的な描写を追加し、読者が情景をイメージできるようにしてください。
4. **感情表現の深化**: キャラクターの内面や心情をより深く描写し、読者の共感を得られるようにしてください。
5. **文体の改善**: 文章のリズムを整え、冗長な表現を削除し、自然で読みやすい日本語にしてください。
6. **文字数の調整**: 現在の文字数（{currentLength}文字）を維持または3,000-4,000文字程度に調整してください。
7. **改行と段落**: 以下の点に注意して、適切な改行と段落分けを行ってください：
   - 会話の前後、場面転換、時間の経過などで適切に改行してください
   - 段落は2-4文程度で区切ることを推奨します
   - 連続する改行は2つまでとし、3つ以上の連続改行は避けてください
   - JSON内のrevisedTextでは、改行を\\\\nで表現してください（例: "改行\\\\n改行"）
   - 改行を適切に使用することで、文章の読みやすさを向上させてください

【出力形式】
以下のJSON形式で「必ず」出力してください。説明文やコメントは一切不要です。JSONのみを出力してください:

{{
  "revisedText": "改訂後の文章全文（元の文章を改善したもの）",
  "improvementSummary": "適用した改善戦略の要約（200文字程度）",
  "changes": [
    "主な変更点1（50文字程度）",
    "主な変更点2（50文字程度）",
    "主な変更点3（50文字程度）"
  ]
}}

【出力ルール】
- JSON形式以外のテキストは一切出力しないでください
- コードブロック（三重のバッククォート）は使用しないでください
- revisedTextには、改善された文章の全文を含めてください
- revisedText内の改行は必ず\\\\nで表現してください（例: "段落1\\\\n\\\\n段落2"）
- 元の文章の内容を保持しつつ、指摘された弱点を克服した文章にしてください
- 改行と段落分けを適切に行い、読みやすい文章にしてください`,

    continue: `以下の文章の続きを執筆してください。
ただし、いきなり執筆するのではなく、
まず以下のステップで思考してください。

【ステップ1：現在の状況分析】
- 現在の文章の最後の場面・状況を要約
- 登場キャラクターの現在の感情・状態を分析
- 未解決の伏線や緊張感の要素を特定

【ステップ2：次の展開の方向性】
- 章の概要に照らして、次に起きるべき出来事を検討
- キャラクターの動機に基づいた自然な行動を予測
- 読者の興味を維持するための引き要素を考案

【ステップ3：文体とトーンの確認】
- 既存の文章の文体を分析
- 次の場面にふさわしいトーンを決定

【ステップ4：執筆】
上記の分析を踏まえ、続きを執筆してください。

---

【現在の文章】
{currentText}

【章情報】
章タイトル: {chapterTitle}
章の概要: {chapterSummary}

【プロジェクト全体のキャラクター情報（一貫性確保用）】
{projectCharacters}

【プロット情報（一貫性確保用）】
テーマ: {plotTheme}
舞台設定: {plotSetting}
物語の構造: {plotStructure}

文体: {style}

{styleDetails}

【出力形式】
思考プロセス（ステップ1〜3）は簡潔に、
執筆本文は600〜1000文字程度で自然な流れで書いてください。
上記の文体設定を厳密に守り、一貫性のある文章を執筆してください。文体を統一し、章設定に沿った自然な流れで続きを書いてください。章の雰囲気や登場キャラクターの性格を維持しながら執筆してください。`,
};

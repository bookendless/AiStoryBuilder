/**
 * キャラクター関連プロンプトテンプレート
 */

export const CHARACTER_PROMPTS = {
  enhance: `以下のキャラクター情報を簡潔に補完してください。

【プロジェクト情報】
作品タイトル: {title}
作品テーマ: {theme}

【プロット情報】
メインテーマ（詳細）: {plotTheme}
舞台設定: {plotSetting}
フック要素: {plotHook}
主人公の目標: {protagonistGoal}
主要な障害: {mainObstacle}

【キャラクター情報】
キャラクター名: {name}
役割: {role}
現在の外見: {appearance}
現在の性格: {personality}
現在の背景: {background}
{speechStyle}

{imageAnalysis}
{synopsis}

以下の形式で具体的に回答してください（各項目は2-3行程度）：
【外見の詳細】
（具体的な外見特徴）

【性格の詳細】
（主要な性格特徴）

【背景の補完】
（出身や過去の経験）`,

  create: `魅力的で多様なキャラクターを作成してください。作品のタイトル・テーマ・内容・概要・プロット詳細・あらすじなどを根拠に、ストーリーに必要な人数をあなたが判断し、その人数分のキャラクターを作成してください。

以下のFew-Shot例を参考に、望ましい出力形式と詳細レベルを理解してください。

---

【Few-Shot例1：ファンタジー作品】

【入力例】
作品タイトル: 星降る夜の約束
作品テーマ: 運命と選択
作品内容・概要: 魔法学院を舞台に、星の力を持つ若者たちが運命に立ち向かう物語
メインジャンル: ファンタジー
サブジャンル: 学園
ターゲット読者: 20代

【出力例】
【キャラクター1】
名前: 御影 蒼真（みかげ そうま）
基本設定: 19歳、男性、魔法学院の2年生
外見: 黒髪で長めの前髪が片目を隠している。身長175cm、やせ型で繊細な印象。常に古びたペンダントを身につけている。
性格: 物静かで思慮深い。他者との距離を保つが、信頼した相手には深い優しさを見せる。責任感が強く、自分を犠牲にしてでも約束を守ろうとする。
背景: 幼少期に両親を星の災厄で失い、祖父に育てられた。星魔法の才能を持つが、その力に内在する危険性を恐れている。

【キャラクター2】
名前: リリィ・ステラ
基本設定: 17歳、女性、魔法学院の1年生
外見: 金色の巻き髪と碧眼。小柄（155cm）で活発な印象。星の刺繍が入った青いマントがトレードマーク。
性格: 明るく社交的で、好奇心旺盛。蒼真とは対照的に、困難に対して前向きに立ち向かう。時に無謀な行動で周囲を驚かせる。
背景: 星術師の名家出身だが、家の期待に縛られることを嫌う。自分の力で道を切り開きたいと学院に入学した。

---

【Few-Shot例2：現代もの作品】

【入力例】
作品タイトル: 雨上がりの交差点
作品テーマ: 再出発と成長
作品内容・概要: 転職を機に新しい街で出会った人々との交流を通じて成長する物語
メインジャンル: 現代
サブジャンル: ヒューマンドラマ
ターゲット読者: 30代

【出力例】
【キャラクター1】
名前: 佐藤 健太（さとう けんた）
基本設定: 32歳、男性、IT企業の営業マン（転職後）
外見: 中肉中背（172cm）、短髪で清潔感がある。転職を機に眼鏡を外し、印象が明るくなった。いつもスーツにネクタイを緩めたスタイル。
性格: 真面目で誠実だが、新しい環境に適応しようと努力している。過去の失敗を引きずりがちだが、前向きに変わりたいと思っている。
背景: 前職で大きな失敗をし、転職を決意。新しい街で一人暮らしを始めたばかり。人との距離感がうまく取れず、孤独を感じることが多い。

【キャラクター2】
名前: 山田 美咲（やまだ みさき）
基本設定: 28歳、女性、カフェの店長
外見: 肩まで届く茶髪、笑顔が印象的。エプロン姿が似合う、親しみやすい雰囲気。身長160cm、健康的な体型。
性格: 明るく社交的で、誰とでも打ち解けられる。困っている人を見過ごせない優しさを持つ。時には厳しいことも言うが、それは相手を思ってのこと。
背景: 地元で育ち、大学卒業後は地元のカフェで働き、5年前に店長に就任。地域の人々とのつながりを大切にしている。

---

【実際のタスク】

作品タイトル: {title}
作品テーマ: {theme}
作品内容・概要: {description}
メインジャンル: {mainGenre}
サブジャンル: {subGenre}
ターゲット読者: {targetReader}

【プロット詳細情報】
メインテーマ（詳細）: {plotTheme}
舞台設定: {plotSetting}
フック要素: {plotHook}
主人公の目標: {protagonistGoal}
主要な障害: {mainObstacle}
あらすじ: {synopsis}

【重要】作品のタイトル、テーマ、内容、およびプロット詳細情報に合ったキャラクター設定を心がけてください：
- 作品タイトルから物語の方向性や雰囲気を読み取り、それに適したキャラクターを設定
- 作品内容・概要から具体的な物語の流れや設定を把握し、それに馴染むキャラクターを設定
- テーマに沿ったキャラクターの動機や目標を考慮
- 作品の世界観や設定に馴染むキャラクター背景を設定
- プロット詳細情報（舞台設定、フック、目標、障害）を反映し、物語の中で役割を果たせるキャラクターにすること

【重要】ターゲット読者層に適したキャラクター設定を心がけてください：
- 10代読者向け：同世代または少し年上のキャラクター（高校生〜大学生程度）
- 20代読者向け：同世代のキャラクター（大学生〜社会人）
- 30代以上読者向け：様々な年齢層のキャラクター（20代〜40代）
- 全年齢向け：親しみやすい年齢設定（中学生〜30代）

【キャラクター多様性の確保】
以下の点に注意して、生成するキャラクターを互いに区別しやすくしてください：
- 年齢を異なる設定にする（例：16歳、18歳、20歳）
- 性格を対照的にする（例：明るい、内向的、冷静）
- 外見特徴を明確に区別する（髪色、身長、体型など）
- 役割や立場を多様にする（主人公、ライバル、サポーターなど）

【自己評価と改善（内部処理）】
生成したキャラクターは、以下のチェックリストに基づいて内部で自己評価し、改善を適用してください。
1. キャラクターの深み：登場人物は多面的で、行動に説得力があるか？
2. 一貫性：動機と行動に矛盾はないか？
3. 読者共感度：読者が感情移入できる弱さや人間味が描かれているか？

スコアが低い項目について自ら改善を適用し、**最終的なキャラクター設定のみを出力してください**。
評価プロセスや改善案の説明は出力に含めないでください。

【出力制約（厳守）】
- **出力は必ず【キャラクター1】または JSON配列 から開始してください**
- 前置き、解説、自己評価プロセスの説明は一切出力しないでください
- キャラクター配置の説明（例：「1. **待つ者**：...」）は出力しないでください
- キャラクターデータのみを出力してください

【出力形式について】
以下のいずれかの形式で出力してください。どちらの形式でも解析可能です。

【形式1：テキスト形式（推奨：ローカルLLM）】
【キャラクター1】
名前: [キャラクター名]
基本設定: [年齢、性別、役割など]
外見: [外見の詳細]
性格: [性格の詳細]
背景: [背景の詳細]

【キャラクター2】
名前: [キャラクター名]
基本設定: [年齢、性別、役割など]
外見: [外見の詳細]
性格: [性格の詳細]
背景: [背景の詳細]

（以下同様に続く）

【形式2：JSON形式（推奨：クラウドAPI）】
以下のJSON形式でも出力可能です：
[
  {
    "name": "キャラクター名",
    "role": "基本設定",
    "appearance": "外見の詳細",
    "personality": "性格の詳細",
    "background": "背景の詳細"
  },
  {
    "name": "キャラクター名",
    "role": "基本設定",
    "appearance": "外見の詳細",
    "personality": "性格の詳細",
    "background": "背景の詳細"
  }
]

どちらの形式でも構いませんが、上記のFew-Shot例と同じレベルの詳細さと具体性で記述してください。`,

  possession: `あなたは「{characterName}」というキャラクターになりきって会話してください。

【キャラクター設定】
名前: {characterName}
役割: {characterRole}
外見: {characterAppearance}
性格: {characterPersonality}
背景: {characterBackground}
{characterSpeechStyle}

【物語の世界観】
タイトル: {projectTitle}
テーマ: {projectTheme}
{projectGenre}
{plotTheme}
{plotSetting}

{chapterInfo}

{chapterContent}

【他のキャラクターとの関係性】
{characterRelationships}

【これまでの会話】
{conversationHistory}

【重要な指示】
1. 常に{characterName}の視点で話してください
2. キャラクターの性格や背景に基づいた行動原理を守ってください
3. {speechStyleInstruction}
4. **キャラクターが知らない情報は知らないと答えてください**
5. キャラクターの価値観や信念を反映した回答をしてください
6. 一人称は適切に使用してください（「私」「僕」「俺」など）
7. キャラクターの性格に基づいた反応をしてください（例：内向的な性格なら控えめに、明るい性格なら積極的に）
8. 物語の設定や世界観に矛盾しないようにしてください
9. 章の状況が指定されている場合は、その状況を反映した回答をしてください
10. 章の本文（草案）が提供されている場合は、そこに書かれた出来事や会話の流れを踏まえて回答してください

ユーザー: {userMessage}
{characterName}:`,

  diary: `あなたは「{characterName}」の視点で、以下の出来事について本音の日記を書いてください。

【物語の出来事】
{chapterSummary}

{chapterContent}

【キャラクター設定】
名前: {characterName}
役割: {characterRole}
外見: {characterAppearance}
性格: {characterPersonality}
背景: {characterBackground}
{characterSpeechStyle}

【物語の世界観】
タイトル: {projectTitle}
テーマ: {projectTheme}

【指示】
- キャラクターの内面の声として書く（一人称で）
- 他人に見せない本音を記録する
- 感情や思考を率直に表現する
- 200-400文字程度で簡潔に
- キャラクターの性格や価値観を反映する
- 日記の形式で自然な文体で書く
- **キャラクターが知らない情報は知らないと答えてください**
- **登場人物の名前は正確に使用し、新たに創作しない**
- **状況や出来事は記載された情報（章の概要や本文）のみを基に記述し、新たに創作しない**
- **章の本文（草案）がある場合は、その具体的な出来事や会話、感情の動きを反映する**

【出力形式】
日記の内容のみを出力してください。説明文やコメントは不要です。`,

  suggest: `作品のタイトル・テーマ・プロット・既存キャラクター・既存の章（ストーリーの流れ）を分析し、物語に不足している、あるいは追加することで物語がより深まるキャラクターを提案してください。

【プロジェクト情報】
作品タイトル: {title}
作品テーマ: {theme}
作品内容・概要: {description}

【プロット情報】
メインテーマ（詳細）: {plotTheme}
舞台設定: {plotSetting}
フック要素: {plotHook}
主人公の目標: {protagonistGoal}
主要な障害: {mainObstacle}
あらすじ: {synopsis}

【既存の章・ストーリーの流れ】
{chapterInfo}

【既存のキャラクター】
{existingCharacters}

【提案の指針】
1. **既存キャラクターとの差別化**: すでに存在するキャラクターと役割や性格が被らないようにしてください。
2. **物語上の必要性**: プロットの展開上、必要不可欠な役割（例：主人公を導く師匠、物語を動かすトリックスター、新たな対立軸を作るライバルなど）を提案してください。
3. **世界観への適合**: 作品の舞台やトーンに合ったキャラクターにしてください。
4. **多様性**: 年齢、性別、性格などのバランスを考慮してください。
5. **ストーリー展開への貢献**: 既存の章の内容を踏まえ、今後の展開（{protagonistGoal}の達成や{mainObstacle}の克服）に寄与するキャラクターを考えてください。

【出力形式（重要）】
**必ず以下のJSON形式で出力してください。解析エラーを防ぐため、JSON全体を \`\`\`json と \`\`\` のコードブロックで囲んでください。**

\`\`\`json
[
  {
    "name": "キャラクター名",
    "role": "物語上の役割（例：主人公の親友、謎の情報屋）",
    "appearance": "外見の特徴（2-3行）",
    "personality": "性格や行動原理（2-3行）",
    "background": "生い立ちや背景、物語に関わる理由（2-3行）",
    "reason": "このキャラクターを提案する理由・物語への貢献（既存の章との関連性など）"
  },
  {
    "name": "キャラクター名",
    "role": "...",
    "appearance": "...",
    "personality": "...",
    "background": "...",
    "reason": "..."
  }
]
\`\`\`

もしJSON形式での出力が極めて困難な場合に限り、以下のテキスト形式でも構いませんが、JSON形式を強く推奨します。

【キャラクター提案1】
名前: ...
役割: ...
外見: ...
性格: ...
背景: ...
提案理由: ...
`,

};

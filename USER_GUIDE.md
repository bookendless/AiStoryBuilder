# ユーザーガイド

## はじめに
AiStoryBuilderは、小説家や脚本家のために設計された、AI搭載の創作支援ツールです。アイデア出しから執筆、推敲まで、創作のあらゆるプロセスを強力にサポートします。

## クイックスタート

### プロジェクトの作成方法

AI Story Builderでは、以下の3つの方法でプロジェクトを作成できます：

#### 1. 画像から物語を作る（推奨）
ホーム画面の「画像から物語を作る」ボタンをクリックし、画像をアップロードします。AIが画像を分析して、タイトル、あらすじ、キャラクター、プロットなどの物語提案を生成します。提案を確認して、プロジェクトを作成できます。

> **注意**: この機能はクラウドAI（OpenAI/Claude/Gemini）設定時のみ利用可能です。

#### 2. 音声から物語を作る
ホーム画面の「音声から物語を作る」ボタンをクリックし、音声ファイル（.mp3, .wav, .m4a）をアップロードします。AIが音声を文字起こしして、物語の提案を生成します。

> **注意**: この機能はクラウドAI（OpenAI/Claude/Gemini）設定時のみ利用可能です。

#### 3. 新規プロジェクトを作成
ホーム画面の「新しいプロジェクトを作成」ボタンをクリックし、タイトルと概要を入力してプロジェクトを作成します。手動でキャラクターやプロットを設定していきます。

### AI設定
画面右上の設定アイコンからAIの設定を行います。

#### ローカルLLM (Ollama/LM Studio)
- **特徴**: プライバシーを重視し、コストを抑えたい場合に推奨
- **用途**: 基本的な文章生成やアイデア出しに使用できます
- **利点**: 完全オフラインで利用可能、データが外部に送信されない

#### クラウドAI
**OpenAI GPT**
- **最新モデル**: GPT-5.1 / GPT-5.1 Mini / GPT-4.1 / GPT-4.1 Mini
- **特徴**: マルチモーダル（画像・音声入力）、高度推論（o1/o3/o4系）、ツール呼び出しに対応
- **用途**: 高品質な文章生成、画像分析、複雑なプロット検証

**Anthropic Claude**
- **最新モデル**: Claude Opus 4 / Claude Sonnet 4.5 / Claude Haiku 4.5
- **特徴**: 長文処理（最大20万トークン）、整合性チェックに強み
- **用途**: 長文の推敲、設定資料の整合性チェック、厳密なトーンコントロール

**Google Gemini**
- **最新モデル**: Gemini 3.0 Pro (Preview) / Gemini 2.5 Pro / Gemini 2.5 Flash
- **特徴**: 最大200万トークンの超長文コンテキスト、画像・音声・動画・PDF入力に対応
- **用途**: 大規模な設定資料の処理、長期プロジェクトの統合管理

> **注意**: クラウドAIを使用する場合は、各プロバイダーのAPIキーが必要です。画像分析や音声認識機能はクラウドAI設定時のみ利用可能です。

## ステップバイステップガイド

### 1. アイデア (Idea)
キーワードやジャンルを入力して、AIと一緒に物語の種を探します。

### 2. プロット (Plot)
「Save the Cat」や「起承転結」などのテンプレートを選択し、物語の構成を練ります。AIが展開を提案することも可能です。

### 3. キャラクター (Character)
登場人物のプロフィール（名前、役割、性格、背景）を詳細に設定します。
- **AI生成**: 簡単な特徴から詳細なプロフィールを生成します。
- **画像分析 (クラウド限定)**: キャラクター画像をアップロードすると、AIが外見や雰囲気を分析して描写を生成します（OpenAI/Claude/Gemini利用時のみ）。
- **関係性**: キャラクター間の関係を定義します。

> **ヒント**: 「画像から物語を作る」機能を使用すると、画像からキャラクター情報も自動生成されます。

### 4. 世界観 (World)
物語の舞台となる世界の設定（地理、魔法、文化など）を管理します。

### 5. 執筆 (Draft)
集中して執筆できるエディタ機能です。
- **表示設定**:
    - **縦書きモード**: 日本語の小説執筆に最適な縦書き表示に対応。
    - **Zenモード**: 余計な要素を隠して執筆に没頭できます。
    - **カスタマイズ**: フォントサイズ、行間、行番号の表示を調整可能。
- **AI執筆ツール**:
    - **続きを書く**: 文脈を読み取り、続きの文章を生成します。
    - **リライト**: 選択した文章を別の表現に書き換えます。
    - **トーン変更**: シリアス、コメディなど、文章の雰囲気を変更します。
    - **要約**: 章の内容を要約します。
- **履歴管理**:
    - 自動保存機能により、執筆履歴が残ります。
    - 過去のバージョンとの差分（Diff）を表示して比較できます。

## ツールと機能

### ツールサイドバー（右側）

画面右側のツールサイドバーから、創作に役立つツールやAI支援機能にアクセスできます。ツールサイドバーは「支援」と「ツール」の2つのタブで構成されています。

#### 支援タブ
現在のステップに応じたAI支援パネルが表示されます：
- **キャラクターステップ**: キャラクター生成や編集の支援
- **あらすじステップ**: あらすじ作成の支援
- **プロットステップ**: プロット構築の支援
- **章ステップ**: 章構成の支援
- **執筆ステップ**: 執筆支援機能

#### ツールタブ
プロジェクト管理に役立つツールが利用できます：
- **イメージボード**: キャラクターや舞台の参考画像を管理
- **用語集**: 作品固有の用語を管理（AI抽出機能付き）
- **相関図**: キャラクター間の関係を視覚的に表示（AI推論機能付き）
- **タイムライン**: 出来事を時系列で管理（AI提案機能付き）
- **世界観**: 世界設定をデータベース化して管理
- **伏線トラッカー**: 物語の伏線を追跡・管理
- **感情マップ**: キャラクターの感情の変化を可視化
- **クイックメモ**: アイデア、タスク、ノートを3つのタブで分けて記録（自動保存）

#### AIチャット相談
ツールサイドバーの下部にある「AIチャット相談」ボタンから、いつでもAIに相談できます。

### 左側サイドバー（ステップナビゲーション）

画面左側のサイドバーから、創作ステップに移動できます。


## AIアシスタント

### AIチャット相談
ツールサイドバーの下部にある「AIチャット相談」ボタン、または画面右下のロボットアイコンから、チャット形式でAIに相談できます。
- **コンテキスト認識**: プロジェクトの設定（キャラ、プロットなど）を把握した上で回答します。
- **クイックアクション**:
    - **整合性チェック**: 設定の矛盾がないかチェックします。
    - **構造分析**: 物語の構成を分析し、改善点を提案します。
    - **用語提案**: 用語集への追加候補を提案します。

## 高度な機能

### マルチモーダル入力（画像・音声から物語生成）
ホーム画面から、画像や音声ファイルをアップロードして物語の提案を生成できます。

- **画像から物語を作る**: 画像をアップロードすると、AIが画像を分析して物語の提案（タイトル、あらすじ、キャラクター、プロットなど）を生成します。
- **音声から物語を作る**: 音声ファイル（.mp3, .wav, .m4a）をアップロードすると、AIが音声を文字起こしして物語の提案を生成します。

生成された提案は、物語提案モーダルで確認・編集できます。提案を確認してからプロジェクトを作成することで、効率的に創作を始められます。

> **注意**: これらの機能はクラウドAI（OpenAI/Claude/Gemini）設定時のみ利用可能です。

### カスタムプロンプト
自分だけのAI指示（プロンプト）を作成・保存して、執筆時に呼び出すことができます。

### インポート/エクスポート
プロジェクトデータのバックアップや、他のツールへの移行のためにデータをエクスポートできます。

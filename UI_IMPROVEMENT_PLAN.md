# UI改善プラン

## 優先度の高い問題点と改善計画

### 📊 優先度評価基準
- **P0（最優先）**: ユーザビリティに重大な影響、即座に対応が必要
- **P1（高優先度）**: ユーザビリティに大きな影響、短期間で対応
- **P2（中優先度）**: ユーザビリティに中程度の影響、中期的に対応
- **P3（低優先度）**: 改善によりUXが向上するが、緊急性は低い

---

## 1. レイアウト改善（P0 - 最優先）

### 1.1 サイドバーのデフォルト折りたたみ
**問題点**: 
- サイドバーが常に表示され、作業領域が狭くなる
- 特に草案作成画面など、広い作業領域が必要な画面で不便

**改善内容**:
- サイドバーをデフォルトで折りたたみ状態にする
- ホバーまたはクリックで展開可能にする
- ユーザーの好みをlocalStorageに保存

**実装ファイル**:
- `src/App.tsx`: デフォルト状態を`true`に変更
- `src/components/Sidebar.tsx`: ホバー展開機能を追加

**期待効果**:
- 作業領域が約20-30%拡大
- 特に草案作成画面での執筆体験が向上

---

## 2. モーダルの削減とインライン編集（P0 - 最優先）

### 2.1 キャラクター編集のインライン化
**問題点**:
- キャラクター追加・編集がモーダルで行われ、操作が複雑
- 画面遷移が頻繁でコンテキストが失われる

**改善内容**:
- キャラクターカードを直接編集可能にする
- カードをクリックで編集モードに切り替え
- インライン編集コンポーネントを作成

**実装ファイル**:
- `src/components/steps/character/CharacterCard.tsx`: インライン編集機能を追加
- `src/components/common/InlineEditor.tsx`: 新規作成（共通コンポーネント）

**期待効果**:
- 操作ステップが5ステップ→2ステップに削減
- コンテキストを失わずに編集可能

---

## 3. 必須項目の視覚的強調（P1 - 高優先度）

### 3.1 必須項目の明確な表示
**問題点**:
- 必須項目と任意項目の区別が視覚的に弱い
- ユーザーが必須項目を見落とす可能性

**改善内容**:
- 必須項目に「必須」バッジを追加（赤色）
- 必須項目の背景色を薄い色で強調
- 必須項目が未入力の場合、エラー表示

**実装ファイル**:
- `src/components/common/FormField.tsx`: 新規作成（共通コンポーネント）
- `src/components/steps/PlotStep1.tsx`: FormFieldコンポーネントを使用
- `src/components/steps/CharacterStep.tsx`: FormFieldコンポーネントを使用

**期待効果**:
- 必須項目の見落としを50%以上削減
- フォーム入力の完了率向上

---

## 4. ラベリングの改善（P1 - 高優先度）

### 4.1 専門用語の平易化
**問題点**:
- 「フック要素」「プロタゴニスト」などの専門用語が使われている
- 初心者ユーザーが理解しにくい

**改善内容**:
- 「フック要素」→「物語の引き（冒頭の魅力）」
- 「プロタゴニスト」→「主人公」
- 専門用語にはツールチップで説明を追加

**実装ファイル**:
- `src/components/steps/PlotStep1.tsx`: ラベルを変更
- `src/components/common/Tooltip.tsx`: 既存コンポーネントを活用

**期待効果**:
- 初心者ユーザーの理解度向上
- ヘルプ参照の必要性が減少

### 4.2 AI生成ボタンのラベル明確化
**問題点**:
- 「AIで生成」が何を生成するのか不明確

**改善内容**:
- 「AIで生成」→「AIで[項目名]を生成」
- 例: 「AIでメインテーマを生成」

**実装ファイル**:
- `src/components/common/AIGenerateButton.tsx`: 新規作成（共通コンポーネント）
- 各ステップ画面で使用

**期待効果**:
- ユーザーの誤操作を削減
- AI機能の理解度向上

---

## 5. 操作フローの改善（P1 - 高優先度）

### 5.1 フィードバックの強化
**問題点**:
- 操作に対する視覚的なフィードバックが不足
- AI生成中の状態表示が不明確

**改善内容**:
- 操作成功時にトースト通知を表示
- ローディング状態を明確に表示（スピナー + プログレスバー）
- AI生成中はボタンを無効化し、進捗を表示

**実装ファイル**:
- `src/components/common/AILoadingIndicator.tsx`: 既存コンポーネントを拡張
- 各AI生成ボタンに適用

**期待効果**:
- ユーザーの不安感を削減
- 操作の成功/失敗が明確に

### 5.2 ステップ間のナビゲーション強化
**問題点**:
- 各ステップ画面で、前後のステップへの導線が弱い
- 現在のステップと全体の進捗の関係が不明確

**改善内容**:
- 各ステップ画面の上部に「前のステップ」「次のステップ」ボタンを追加
- ヘッダーの進捗バーを常時表示（既存機能を活用）

**実装ファイル**:
- `src/components/common/StepNavigation.tsx`: 新規作成（共通コンポーネント）
- 各ステップ画面で使用

**期待効果**:
- ステップ間の移動が容易に
- ユーザーが迷子になりにくくなる

---

## 6. レスポンシブデザインの強化（P2 - 中優先度）

### 6.1 モバイル最適化
**問題点**:
- モバイル表示での最適化が不十分
- サイドバーが常に表示され、モバイルでは画面を占有

**改善内容**:
- モバイルではサイドバーをドロワーメニューに（既に実装済みの可能性あり）
- タッチ操作に最適化されたボタンサイズ（44px×44px以上）
- モバイル専用のレイアウトを提供

**実装ファイル**:
- `src/components/Sidebar.tsx`: モバイル対応を確認・改善
- `src/components/Header.tsx`: モバイルメニューの改善

**期待効果**:
- モバイルでの操作体験が大幅に向上
- タッチ操作の誤操作を削減

---

## 7. アクセシビリティの改善（P2 - 中優先度）

### 7.1 キーボードナビゲーションの強化
**問題点**:
- すべての操作がキーボードで実行できない

**改善内容**:
- すべてのインタラクティブ要素にキーボードイベントを追加
- Tab順序を適切に設定
- フォーカスリングを目立つ色に

**実装ファイル**:
- 各コンポーネントでキーボードイベントを追加
- `src/index.css`: フォーカスリングのスタイルを強化

**期待効果**:
- キーボードユーザーの操作体験が向上
- アクセシビリティ基準（WCAG 2.1 AA）への準拠

---

## 実装スケジュール

### Phase 1（1-2週間）: 最優先項目 ✅ 完了
1. ✅ サイドバーのデフォルト折りたたみ（localStorage対応）
2. ✅ 必須項目の視覚的強調（FormFieldコンポーネント作成）
3. ✅ ラベリングの改善（専門用語の平易化）
4. ✅ AI生成ボタンのラベル明確化

### Phase 2（2-3週間）: 高優先度項目
4. ✅ キャラクター編集のインライン化
5. ✅ AI生成ボタンのラベル明確化
6. ✅ フィードバックの強化
7. ✅ ステップ間のナビゲーション強化

### Phase 3（3-4週間）: 中優先度項目
8. ✅ レスポンシブデザインの強化
9. ✅ アクセシビリティの改善

---

## 共通コンポーネント作成計画

### 1. FormField（入力欄コンポーネント）
```typescript
interface FormFieldProps {
  label: string;
  required?: boolean;
  helpText?: string;
  error?: string;
  children: React.ReactNode;
}
```
- **配置**: `src/components/common/FormField.tsx`
- **機能**: ラベル、必須表示、ヘルプテキスト、エラー表示を統合

### 2. AIGenerateButton（AI生成ボタン）
```typescript
interface AIGenerateButtonProps {
  target: string; // 生成対象の項目名
  onGenerate: () => void;
  isLoading?: boolean;
}
```
- **配置**: `src/components/common/AIGenerateButton.tsx`
- **機能**: 統一的なAI生成ボタン

### 3. InlineEditor（インライン編集コンポーネント）
```typescript
interface InlineEditorProps {
  value: string;
  onSave: (value: string) => void;
  onCancel: () => void;
  multiline?: boolean;
}
```
- **配置**: `src/components/common/InlineEditor.tsx`
- **機能**: クリックで編集モードに切り替え

### 4. StepNavigation（ステップナビゲーション）
```typescript
interface StepNavigationProps {
  currentStep: Step;
  onPrevious: () => void;
  onNext: () => void;
  previousLabel?: string;
  nextLabel?: string;
}
```
- **配置**: `src/components/common/StepNavigation.tsx`
- **機能**: 前後のステップへのナビゲーション

---

## 測定指標（KPI）

### ユーザビリティ指標
- **作業領域の拡大**: サイドバー折りたたみにより20-30%拡大
- **操作ステップの削減**: キャラクター編集が5ステップ→2ステップに
- **必須項目の見落とし削減**: 50%以上削減を目標
- **エラー発生率の削減**: フォーム入力エラーを30%削減

### ユーザー満足度指標
- **操作時間の短縮**: 主要操作の完了時間を20%短縮
- **ヘルプ参照の減少**: ヘルプ参照回数を30%削減
- **モバイルでの操作成功率**: 90%以上を目標

---

## 注意事項

1. **既存機能の維持**: 改善により既存機能が壊れないよう注意
2. **段階的な実装**: 一度にすべてを変更せず、段階的に実装
3. **ユーザーテスト**: 各Phase完了後にユーザーテストを実施
4. **パフォーマンス**: 新規コンポーネント追加時はパフォーマンスに注意
5. **アクセシビリティ**: すべての変更でアクセシビリティを維持・向上

---

## 次のステップ

1. このプランをレビューし、優先順位を確認
2. Phase 1の実装を開始
3. 共通コンポーネントの作成から着手
4. 各ステップ画面への適用を段階的に実施


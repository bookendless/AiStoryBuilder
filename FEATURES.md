# 機能紹介ガイド

AI Story Builderのデスクトップアプリケーションの詳細な機能を紹介します。

> **⚠️ 重要なご注意**
> 
> このアプリケーションはAI技術を活用した開発手法（AI協働開発）により作成されています。そのため、制作者が意図しない挙動や仕様が生じる可能性がございます。ご利用の際は、予期せぬ動作が発生する場合があることをご理解いただき、ご容赦ください。

## 📋 目次

- [AI支援創作機能](#ai支援創作機能)
- [ツール・サイドバー機能](#ツールサイドバー機能)
- [執筆・エディタ機能](#執筆エディタ機能)
- [データ管理・その他](#データ管理その他)

## AI支援創作機能

### 🎨 マルチモーダル入力（画像・音声から物語生成）
- **画像から物語を作る**: 画像をアップロードすると、AIが画像を分析して物語の提案（タイトル、あらすじ、キャラクター、プロットなど）を生成します。
- **音声から物語を作る**: 音声ファイルをアップロードすると、AIが音声を文字起こしして物語の提案を生成します。
- **物語提案の確認と編集**: 生成された提案を確認し、必要に応じて編集してからプロジェクトを作成できます。

> **注意**: これらの機能はクラウドAI（OpenAI/Claude/Gemini）設定時のみ利用可能です。

### 🤖 キャラクター生成
- **AI自動生成**: 名前、役割、性格、背景などの詳細なプロフィールを自動生成します。
- **画像分析 (Cloud AI)**: アップロードしたキャラクター画像をAIが分析し、外見描写や性格を推測してプロフィールに反映します。
- **関係性推論**: ストーリーの文脈から、キャラクター間の関係性をAIが推測して提案します。

### 📖 プロット・世界観構築
- **プロット生成**: 「Save the Cat」や「起承転結」などのテンプレートに基づき、物語の構成を提案します。
- **世界設定生成**: 地理、魔法、文化などの世界観設定をAIが提案・拡張します。
- **用語抽出**: 本文から重要な用語をAIが自動抽出し、用語集への追加を提案します。
- **タイムライン提案**: プロットや本文から、年表に追加すべきイベントをAIが提案します。

### 🎭 キャラクター憑依チャット
- **ロールプレイ**: AIが設定したキャラクターの性格、口調、背景になりきって対話します。
- **設定検証**: 会話を通じてキャラクターの口調や反応がイメージ通りか確認できます。
- **履歴保存**: 会話はログとして保存され、後の執筆の参考にできます。

### 💬 AIアシスタント
- **チャットインターフェース**: 創作に関する相談をチャット形式で行えます。
- **コンテキスト認識**: プロジェクトの設定（キャラ、プロット、用語集など）を理解した上で回答します。
- **クイックアクション**:
    - **整合性チェック**: 設定の矛盾やプロットの穴を指摘します。
    - **構造分析**: 物語の構成を分析し、改善点を提案します。
    - **アイデア出し**: 展開に詰まった時にアイデアを提案します。
    - **用語提案**: 新しい用語や設定の提案を行います。
    - **タイムライン要約**: 時系列の整理をサポートします。
    - **関係性まとめ**: キャラクター関係の整理をサポートします。

## ツール・サイドバー機能

### 🛠️ ツールサイドバー（右側）

画面右側のツールサイドバーには、「支援」と「ツール」の2つのタブがあります。

#### 支援タブ
現在のステップに応じたAI支援パネルが表示されます：
- **キャラクターステップ**: キャラクター生成や編集の支援
- **あらすじステップ**: あらすじ作成の支援
- **プロットステップ**: プロット構築の支援（プロット1・プロット2）
- **章ステップ**: 章構成の支援
- **執筆ステップ**: 執筆支援機能

#### ツールタブ
プロジェクト管理に役立つツールが利用できます：

##### 🖼️ イメージボード
- **画像管理**: キャラクター、舞台、ムードなどの参考画像をカテゴリ別に管理できます。
- **ビューワー**: 画像の拡大表示、回転、ダウンロードが可能です。

##### 📚 用語集 (Glossary)
- **用語管理**: 名前、読み方、定義、カテゴリを管理します。
- **AI支援**: 定義の自動生成や、本文からの抽出機能があります。

##### 🕸️ 人物相関図
- **視覚化**: キャラクター間の関係をノードとラインで視覚的に表示します。
- **AI推論**: ストーリーの内容から、キャラクター間の関係性をAIが推測して提案します。
- **フローチャート**: ドラッグ操作で配置を調整できるインタラクティブな図です。

##### ⏱️ タイムライン
- **年表管理**: 出来事を時系列で整理・表示します。
- **カテゴリ分け**: プロット、キャラクター、世界情勢などでイベントを分類できます。
- **AI提案**: プロットの内容から、タイムラインに追加すべきイベントをAIが提案します。

##### 🌍 世界観設定
- **世界設定管理**: 地理、魔法、文化などの世界観設定をデータベース化して管理します。

##### 🔖 伏線トラッカー
- **伏線管理**: 物語の伏線を追跡・管理し、回収状況を確認できます。

##### 📊 感情マップ
- **感情可視化**: キャラクターの感情の変化を時系列で可視化します。

##### 📝 クイックメモ
- **タブ管理**: アイデア、タスク、ノートを3つのタブで分けて記録できます。
- **自動保存**: メモの内容は自動的に保存されます（プロジェクトごとに保存）。

#### 💬 AIチャット相談
ツールサイドバーの下部にある「AIチャット相談」ボタンから、いつでもAIに相談できます。

## 執筆・エディタ機能

### ✍️ 高機能エディタ
- **縦書きモード**: 日本語小説に最適な縦書き表示に対応しています。
- **Zenモード**: サイドバーやヘッダーを隠し、執筆に集中できるモードです。
- **表示カスタマイズ**: フォントサイズ、行間、行番号の表示を調整できます。

### ✨ AI執筆ツール
- **続きを書く**: 文脈を読み取り、続きの文章を生成します。
- **リライト**: 選択した文章を、指定したトーン（シリアス、コメディなど）で書き直します。
- **描写強化**: 選択した箇所の描写をより詳細に、豊かにします。
- **要約**: 章の内容を要約します。

### 🕒 履歴管理
- **自動保存**: 執筆内容は自動的に保存されます。
- **スナップショット**: 任意のタイミングで履歴を保存できます。
- **差分表示 (Diff)**: 現在の原稿と過去のバージョンの違いを視覚的に比較できます。

## データ管理・その他

### 💾 データ保存
- **ローカル保存**: データはブラウザのローカルストレージに保存され、外部サーバーには送信されません（Cloud AI使用時を除く）。
- **インポート/エクスポート**: プロジェクトデータをJSONファイルとしてバックアップ・復元できます。

### ⚙️ 設定
- **AIプロバイダー切替**: ローカルLLM (Ollama) とクラウドAI (OpenAI/Claude/Gemini) を切り替え可能です。
- **カスタムプロンプト**: 独自のAI指示を作成・保存して利用できます。
